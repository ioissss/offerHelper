<view class="PageContainer">

<!-- 个人信息栏 -->
<view class="personalInfo">
<view style="display: flex;justify-content: center;flex-direction: column;margin-left: 40rpx;">
<!-- 名字 -->
<view>
<text style="font-weight: 530;font-size: 35rpx;">刘春一</text>
</view>
<!-- 额外信息 -->
<text style="font-size: 18rpx; font-weight: 100rpx;margin-top: 5rpx;">喜欢张大权</text>
</view>

<view class="name" style="margin-left: 400rpx;">
  <van-image style="position: relative; left: 75rpx; top: 0rpx"
  round
  width="100rpx"
  height="100rpx"
  src="https://img.yzcdn.cn/vant/cat.jpeg"
/>
</view>
</view>

<!-- 统计信息栏 -->
<view class="statistical">


<view class="statistical-item">
<view>
<text style="font-size: 35rpx;font-weight: 600;">604</text>
</view>
<text style="font-size: 22rpx;">投递数量</text>
</view>

<view class="statistical-item" style="margin-left: 80rpx;">
<view>
<text style="font-size: 35rpx;font-weight: 600;">604</text>
</view>
<text style="font-size: 22rpx;">约面</text>
</view>

<view class="statistical-item" style="margin-left: 80rpx;">
<view>
<text style="font-size: 35rpx;font-weight: 600;">108</text>
</view>
<text style="font-size: 22rpx;">offer</text>
</view>

</view>

<view style="display: flex; flex-direction: row; width: 750rpx; height: 100rpx; position: relative; left: 0rpx; top: 22rpx; z-index: 999;">
  <van-image bind:tap="onClickTabImage" data-index="0" style="margin-left: 85rpx;margin-top: 27rpx;"
  round
  width="70rpx"
  height="70rpx"
  src="{{active_tab==0?'https://gitee.com/xing-xi-zhang/111/raw/master/4404e001fd16e37710311e74a36badc.png':'https://gitee.com/xing-xi-zhang/111/raw/master/0c81f6bb88a18c1f68edc3593cc3933.png'}}"
/>
<van-image bind:tap="onClickTabImage" data-index="1" style="margin-left: 150rpx; margin-top: 27rpx; position: relative; left: 36rpx; top: 0rpx"
  round
  width="70rpx"
  height="70rpx"
  src="{{active_tab==1?'https://gitee.com/xing-xi-zhang/111/raw/master/5cb511e74e2ac159fc6e7da9f8f0d6f.png':'https://gitee.com/xing-xi-zhang/111/raw/master/%E8%AE%B0%E5%BD%95.png'}}"
/>
<van-image bind:tap="onClickTabImage" data-index="2" style="margin-left: 195rpx; margin-top: 27rpx; position: relative; left: 22rpx; top: 0rpx"
  round
  width="70rpx"
  height="70rpx"
  src="https://gitee.com/xing-xi-zhang/111/raw/master/%E5%85%B6%E4%BB%96%E4%BA%BA%E5%91%98.png"
/>
</view>

<!-- 功能分栏 -->
<van-tabs
active="{{tabs[active_tab]}}"
bindchange="handleChange"
duration="{{0.4}}"
 color="#000000">
  <van-tab key="tab1" title="统计" name="a">
  </van-tab>

  <van-tab key="tab2" title="我的投递" name="b">
    <!-- 操作栏 -->
    <view style="display: flex;flex-direction: row;">
    <van-icon wx:if="{{!editorMode}}" style="margin-left: 30rpx;" bind:tap="enterEditorMode" size="50rpx" name="https://gitee.com/xing-xi-zhang/111/raw/master/%E4%BF%AE%E6%94%B9.png" />
    <van-icon wx:if="{{editorMode}}" style="margin-left: 30rpx;" bind:tap="deleteRecords" size="50rpx" name="https://gitee.com/xing-xi-zhang/111/raw/master/%E5%88%A0%E9%99%A4.png" />
    <van-icon wx:if="{{!editorMode}}" style="margin-left: 30rpx;" bind:tap="enterEditorMode" size="50rpx" name="https://gitee.com/xing-xi-zhang/111/raw/master/%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5.png" />
    <van-icon style="margin-left: 590rpx;" wx:if="{{editorMode}}" bind:tap="saveEdit" size="65rpx" name="https://gitee.com/xing-xi-zhang/111/raw/master/%E4%BF%9D%E5%AD%98.png" />
    </view>

  <!-- 每一行必须有唯一标识符，id，作为rowKey -->
<table
select="{{showSelectBox}}"
bindcheckkey="checkKey"
generic:action-td="action-td"
isExpand="{{true}}" expandValueKey="" initExpandValue="暂无备注" generic:expand-component="expand-component" bindclickexpand="handleClickExpand"
 tableHeight="{{1200}}" rowKey = "id" bindlongpress = "handleRowLongPress" columns = "{{columns}}" dataList = "{{dataList}}" getListLoading="{{isLoadingData}}" showTipImage="{{false}}">
</table>
  </van-tab>

  <van-tab key="tab3" title="看大家" name="c">
  </van-tab>
</van-tabs>

<view bind:tap="goto" wx:if="{{active_tab==1&&!(editorMode)}}" class="fixed-top">
  <van-image
  width="120rpx"
  height="120rpx"
  src="https://gitee.com/xing-xi-zhang/111/raw/master/%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%20(2).png"
/>
</view>


<!-- 增加记录 -->
<van-popup closeable round z-index = "{{999}}" show="{{ showAddPanel }}" bind:close="onClose">
    <view class="addRecordPanel">
      <van-cell-group>
        <van-field
          label="公司"
          model:value="{{ companyName }}"
          placeholder="输入公司名称"
          border="{{ true }}"
          bind:change="onChange"
        />
        <van-field
          label="城市"
          model:value="{{ city }}"
          placeholder="城市"
          border="{{ true }}"
          bind:change="onChange"
        />
        <van-field
          label="岗位"
          model:value="{{ job }}"
          placeholder="投递岗位"
          border="{{ true }}"
          bind:change="onChange"
        />
        <van-field
          label="链接"
          model:value="{{ url }}"
          placeholder="投递链接：https//..."
          border="{{ true }}"
          bind:change="onChange"
        />
        <van-field
          label="描述"
          model:value="{{ jobDesc }}"
          placeholder="岗位描述"
          border="{{ true }}"
          bind:change="onChange"
        />

        <view>
        <van-uploader show-upload="{{false}}" bind:before-read="beforeRead" bind:delete="deleteImg" max-size="{{1000*1024}}" deletable="{{ true }}" max-count="1" file-list="{{ fileList }}" bind:after-read="afterRead">
          <view wx:if="{{fileList.length==0}}" style="margin-top: 30rpx;display: flex;flex-direction: column;margin-left: 30rpx;">
            <van-image
          width="80rpx"
          height="80rpx"
          src="https://gitee.com/xing-xi-zhang/111/raw/master/%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%20(2).png"
          />
          <view>
          <text style="color: rgb(121, 118, 115);font-size: 20rpx;">添加图片</text>
          </view>  
          </view>
        </van-uploader>
        </view>
        

        <view style="margin-top: 20rpx;display: flex;flex-direction: column;margin-left: 30rpx;" wx:if="{{resumeFile.length !=0}}">
      <van-image
        width="80rpx"
        height="80rpx"
        src="https://gitee.com/xing-xi-zhang/111/raw/master/%E6%96%87%E6%A1%A3.png"
      />
      <text style="margin-top: 10rpx;color: rgb(138, 141, 141);">{{resumeFile.name}}</text>
      </view>
        <view bind:tap="chooseFileFromMessage" style="margin-top: 30rpx;display: flex;flex-direction: column;margin-left: 30rpx;" wx:if="{{resumeFile.length==0}}">
      <van-image
        width="80rpx"
        height="80rpx"
        src="https://gitee.com/xing-xi-zhang/111/raw/master/%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%20(2).png"
      />
      <view>
          <text style="color: rgb(121, 118, 115);font-size: 20rpx;">添加简历</text>
          </view>  
      </view>

        <van-field
          label="行业"
          model:value="{{ sector }}"
          placeholder="所属行业"
          border="{{ true }}"
          bind:change="onChange"
        />
      
      <view style="margin-top: 20rpx;margin-left: 20rpx;">
      <my_select
        title="投递状态"
        bind:tap="chooseSector" 
        nowId="{{selectIndex_State}}"
        nameList="{{stateList}}" 
        nowName="{{state}}" 
        placeholder="投递状态" 
        bind:handleChange="stateChange">
      </my_select>
      </view>

      <view style="margin-top: 20rpx;margin-left: 20rpx;">
      <my_select
        title="企业性质"
        bind:tap="chooseSector" 
        nowId="{{selectIndex_EN}}"
        nameList="{{enterpriseNatureList}}" 
        nowName="{{enterpriseNature}}" 
        placeholder="企业性质" 
        bind:handleChange="ENchange">
      </my_select>
      </view>

      <view style="margin-top: 20rpx;margin-left: 20rpx;">
      <my_select
        title="企业规模"
        bind:tap="chooseSector" 
        nowId="{{selectIndex_CS}}"
        nameList="{{CompanySizeList}}" 
        nowName="{{CompanySize}}" 
        placeholder="公司规模" 
        bind:handleChange="companySizeChange">
      </my_select>
      </view>
        
      <van-cell-group>
      <van-field
        value="{{ message }}"
        label="备注"
        type="textarea"
        placeholder="请输入备注"
        autosize
        border="{{ false }}"
      />
      </van-cell-group>

        <button bind:tap="addRecord"><text style="color: rgb(131, 199, 199);">创建记录</text></button>

    </van-cell-group>
    </view>

</van-popup>

<!-- 确认弹框 -->
<van-dialog id="van-dialog" />


</view>